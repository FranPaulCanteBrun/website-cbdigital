---
/**
 * Página Testimonios - CB Digital
 * 
 * Testimonios de clientes.
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import TestimonialCard from '@/components/sections/TestimonialCard.astro';

// Cargar traducciones
const pagesEs = await import('@/locales/es/pages.json');
const pagesEn = await import('@/locales/en/pages.json');
const commonEs = await import('@/locales/es/common.json');
const commonEn = await import('@/locales/en/common.json');

// Leer cookie del idioma en el servidor
const localeCookie = Astro.cookies.get('innovatac-locale');
const serverLocale = (localeCookie?.value === 'es' || localeCookie?.value === 'en') 
  ? localeCookie.value as 'es' | 'en'
  : 'es';

const currentLocale = serverLocale;
const pages = currentLocale === 'es' ? pagesEs.default : pagesEn.default;
const common = currentLocale === 'es' ? commonEs.default : commonEn.default;

// Testimonios reales
const testimonials = [
  {
    id: 1,
    name: 'Natalia C.',
    role: currentLocale === 'es' ? 'Médica Nefróloga' : 'Nephrologist Doctor',
    text: currentLocale === 'es'
      ? 'La aplicación de escritorio desarrollada a medida me ha ayudado significativamente a mejorar el seguimiento de mis pacientes y sus tratamientos. El proceso fue muy profesional: me realizaron preguntas específicas sobre mis necesidades y todo fue integrado perfectamente en la aplicación. Recomendado 100%.'
      : 'The custom desktop application has significantly helped me improve the tracking of my patients and their treatments. The process was very professional: they asked me specific questions about my needs and everything was perfectly integrated into the application. 100% recommended.',
  },
];
---

<BaseLayout
  title={`${pages.testimonials.title} - ${common.site.name}`}
  description={pages.testimonials.subtitle}
>
  <div class="py-16 bg-light-bg-primary dark:bg-dark-bg-primary">
    <div class="container-custom mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-light-text-primary dark:text-white mb-4">
          {pages.testimonials.title}
        </h1>
        <p class="text-xl text-light-text-secondary dark:text-[#f5f5f5] max-w-3xl mx-auto">
          {pages.testimonials.subtitle}
        </p>
      </div>

      {testimonials.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {testimonials.map((testimonial) => (
            <TestimonialCard
              name={testimonial.name}
              role={testimonial.role}
              text={testimonial.text}
            />
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <p class="text-lg text-light-text-secondary dark:text-[#f5f5f5]">
            {pages.testimonials.empty}
          </p>
        </div>
      )}
    </div>
  </div>
</BaseLayout>

